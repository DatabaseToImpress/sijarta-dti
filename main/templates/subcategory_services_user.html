<!DOCTYPE html>
<html lang="en">
<head>
        {% include "navbar/navbar_user.html" %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subcategory Services</title>
    
    <script>

        const subcategories = {
            "1": {
                name: "Kitchen and Refrigerator Cleaning",
                serviceCategory: "Home Cleaning",
                description: "Detailed cleaning for kitchens and refrigerators, ensuring freshness and hygiene.",
                workers: [
                    { name: "Luffy", profileLink: "/worker/luffy" },
                    { name: "Matsuzaki", profileLink: "/worker/matsuzaki" }
                ],
                sessions: [
                    { session: 1, price: 65000 },
                    { session: 2, price: 115000 },
                    { session: 3, price: 165000 },
                    { session: 4, price: 215000 }
                ],
                testimonials: [
                    { user: "User1", text: "Amazing service!", date: "2024-11-01", worker: "Luffy", rating: 5 },
                    { user: "User2", text: "Very professional!", date: "2024-11-02", worker: "Matsuzaki", rating: 4 }
                ]
            },
            "2": {
                name: "Daily Cleaning",
                serviceCategory: "Home Cleaning",
                description: "Regular cleaning to maintain a hygienic and fresh environment at home.",
                workers: [
                    { name: "Aleo", profileLink: "/worker/aleo" },
                    { name: "Nanda", profileLink: "/worker/nanda" }
                ],
                sessions: [
                    { session: 2, price: 65000 },
                    { session: 3, price: 115000 }
                ],
                testimonials: []
            },
            "3": {
                name: "Sofa Washing",
                serviceCategory: "Deep Cleaning",
                description: "Thorough cleaning of sofas to remove dirt, stains, and allergens.",
                workers: [
                    { name: "Nara", profileLink: "/worker/nara" },
                    { name: "Luffy", profileLink: "/worker/luffy" }
                ],
                sessions: [
                    { session: 1, price: 98500 },
                    { session: 2, price: 162500 },
                    { session: 3, price: 230000 }
                ],
                testimonials: [
                    { user: "User3", text: "So sigma!", date: "2024-12-03", worker: "Luffy", rating: 3 },
                    { user: "User4", text: "Very beautiful!", date: "2024-10-12", worker: "Nara", rating: 5 }
                ]
            },
            "4": {
                name: "Carpet Washing",
                serviceCategory: "Deep Cleaning",
                description: "Deep cleaning for carpets to remove dust, stains, and bacteria.",
                workers: [
                    { name: "Matsuzaki", profileLink: "/worker/matsuzaki" },
                    { name: "Aleo", profileLink: "/worker/aleo" }
                ],
                sessions: [
                    { session: 1, price: 98500 },
                    { session: 2, price: 162500 },
                    { session: 3, price: 230000 }
                ],
                testimonials: []
            },
            "5": {
                name: "AC Chemical Service",
                serviceCategory: "Air Conditioning Service",
                description: "Chemical cleaning of AC units to ensure optimal cooling performance.",
                workers: [
                    { name: "Nanda", profileLink: "/worker/nanda" },
                    { name: "Nara", profileLink: "/worker/nara" }
                ],
                sessions: [
                    { session: 1, price: 450000 },
                    { session: 2, price: 650000 },
                    { session: 3, price: 850000 }
                ],
                testimonials: []
            },
            "6": {
                name: "AC Freon Fixing",
                serviceCategory: "Air Conditioning Service",
                description: "Fixing Freon leaks and recharging to restore your AC's cooling capacity.",
                workers: [
                    { name: "Luffy", profileLink: "/worker/luffy" },
                    { name: "Matsuzaki", profileLink: "/worker/matsuzaki" }
                ],
                sessions: [
                    { session: 1, price: 200000 },
                    { session: 2, price: 300000 },
                    { session: 3, price: 400000 }
                ],
                testimonials: []
            },
            "7": {
                name: "House Massage",
                serviceCategory: "Massage",
                description: "Relaxing massage services offered in the comfort of your home.",
                workers: [
                    { name: "Aleo", profileLink: "/worker/aleo" },
                    { name: "Matsuzaki", profileLink: "/worker/matsuzaki" }
                ],
                sessions: [
                    { session: 1, price: 140000 },
                    { session: 2, price: 240000 },
                    { session: 3, price: 340000 }
                ],
                testimonials: []
            },
            "8": {
                name: "Swedish Massage",
                serviceCategory: "Massage",
                description: "A soothing full-body massage that promotes relaxation and stress relief.",
                workers: [
                    { name: "Nara", profileLink: "/worker/nara" },
                    { name: "Nanda", profileLink: "/worker/nanda" }
                ],
                sessions: [
                    { session: 1, price: 500000 },
                    { session: 2, price: 700000 },
                    { session: 3, price: 900000 }
                ],
                testimonials: []
            },
            "9": {
                name: "Hairwash",
                serviceCategory: "Hair Care",
                description: "A refreshing hair cleaning service that nourishes your hair and scalp with shampoo, conditioner, and optional treatments for a revitalized look.",
                workers: [
                    { name: "Aleo", profileLink: "/worker/aleo" },
                    { name: "Matsuzaki", profileLink: "/worker/matsuzaki" }
                ],
                sessions: [
                    { session: 1, price: 180000 },
                    { session: 2, price: 280000 },
                    { session: 3, price: 380000 }
                ],
                testimonials: []
            },
            "10": {
                name: "Creambath",
                serviceCategory: "Hair Care",
                description: "A relaxing hair treatment that combines a nourishing cream mask with a soothing scalp massage for soft, healthy hair.",
                workers: [
                    { name: "Luffy", profileLink: "/worker/luffy" },
                    { name: "Nara", profileLink: "/worker/nara" }
                ],
                sessions: [
                    { session: 1, price: 400000 },
                    { session: 2, price: 600000 },
                    { session: 3, price: 800000 }
                ],
                testimonials: []
            }
        };

        function setPageTitle(subcategoryId) {
            const subcategory = subcategories[subcategoryId];
            document.title = `${subcategory.serviceCategory} - Subcategory Services`;
        }

        function loadSubcategory(subcategoryId) {
            const subcategory = subcategories[subcategoryId];

            if (subcategory) {
                setPageTitle(subcategoryId);

                let workerHtml = '';
                subcategory.workers.forEach(worker => {
                    workerHtml += `<li><a href="${worker.profileLink}" class="worker-link">${worker.name}</a></li>`;
                });

                let sessionHtml = '';
                subcategory.sessions.forEach(session => {
                    sessionHtml += `
                        <li>Session ${session.session}: ${session.price.toLocaleString()}
                            <button class="booking-button" onclick="bookService(${session.session}, ${session.price})">Booking</button>
                        </li>
                    `;
                });

                let testimonialHtml = '';
                subcategory.testimonials.forEach(testimonial => {
                    testimonialHtml += `
                        <div class="testimonial-item">
                            <p><strong>${testimonial.user}</strong> (${testimonial.date})</p>
                            <p>Worker: ${testimonial.worker} | Rating: ${testimonial.rating}</p>
                            <p>${testimonial.text}</p>
                        </div>
                    `;
                });

                document.getElementById("subcategoryInfo").innerHTML = `
                    <h1 class="title">${subcategory.serviceCategory}</h1>
                    <h2 class="subtitle">${subcategory.name}</h2>
                    <p class="description">${subcategory.description}</p>
                    <h3 class="section-title">Available Workers:</h3>
                    <ul class="worker-list">${workerHtml}</ul>
                    <h3 class="section-title">Session Prices:</h3>
                    <ul class="session-list">${sessionHtml}</ul>
                    <h3 class="section-title">Testimonials:</h3>
                    <div class="testimonial-list">${testimonialHtml || "No testimonials available."}</div>
                    <button class="add-testimonial-button" onclick="redirectToAddTestimonial()">Add Testimonial</button>
                `;
            } else {
                document.getElementById("subcategoryInfo").innerHTML = "<p class='text-red-500'>Subcategory not found.</p>";
            }
        }

        function redirectToAddTestimonial() {
            window.location.href = "/add-testimonial";
        }

        function getSubcategoryIdFromUrl() {
            const urlPath = window.location.pathname;
            const parts = urlPath.split('/');
            const subcategoryId = parts[parts.length - 2];
            return subcategoryId;
        }

        function bookService(session, price) {
            window.location.href = `/booking/?session=${session}&price=${price}`;
        }

        window.onload = function() {
            const subcategoryId = getSubcategoryIdFromUrl();
            if (subcategories[subcategoryId]) {
                loadSubcategory(subcategoryId);
            } else {
                document.getElementById("subcategoryInfo").innerHTML = "<p class='text-red-500'>Invalid subcategory ID.</p>";
            }
        };
    </script>
    <style>
        /* General Styling */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #F8EEE7;
            margin: 0;
            padding: 0;
        }
    
        /* Navbar Styling */
        nav {
            background-color: #94618E; 
            color: #F4DECB;
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 10;
        }
    
        nav ul {
            list-style: none;
            display: flex;
            justify-content: space-around;
            padding: 0;
            margin: 0;
        }
    
        nav li {
            display: inline;
        }
    
        nav a {
            text-decoration: none;
            color: #F4DECB;
            font-weight: bold;
            font-size: 1rem;
        }
    
        nav a:hover {
            color: #49274A; 
        }
    

        .container {
            margin-top: 80px; 
            padding: 20px;
            background-color: #F4DECB; 
            border-radius: 8px;
            width: 80%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
    
        h1, h2, h3 {
            color: #49274A;
        }
    
        .worker-link {
            text-decoration: none;
            color: #49274A;
        }
    
        .worker-link:hover {
            text-decoration: underline;
        }
    
        ul {
            list-style-type: none;
            padding: 0;
        }
    
        /* Button Styling */
        .booking-button, .add-testimonial-button {
            background-color: #94618E;
            color: #F8EEE7;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            margin: 10px 0;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }
    
        .booking-button:hover, .add-testimonial-button:hover {
            background-color: #7D4B6C; 
        }
    

        .testimonial-container {
            margin-top: 40px;
            padding: 20px;
            background-color: #FFFFFF;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    
        .testimonial-list {
            margin: 0 auto;
            text-align: center;
            max-width: 600px;
        }
    
        .testimonial-item {
            background-color: #F4DECB;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    
        .testimonial-item p {
            margin: 5px 0;
        }
    </style>
    
</head>
<body>
    <!-- Include Navbar -->
    {% include "navbar/navbar_worker.html" %}

    <!-- Page Content -->
    <div class="container">
        <div id="subcategoryInfo">
            <!-- Dynamic content -->
        </div>
    </div>
</body>
</html>